import{r as o,j as e}from"./app-DcC59gM4.js";import{C as z}from"./card-B1wzXt6A.js";import{L as R}from"./label-DnZ7SDYy.js";import{c as w,B}from"./button-CpjRaYVo.js";import{I as E}from"./input-B_FIGcdk.js";import{I as $}from"./input-error-CwjUQo6T.js";import{X as D}from"./app-layout-md0N9P8I.js";import{U as q}from"./upload-XjPs63n1.js";import{F as _}from"./users-DLXe7dN4.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],H=w("FileImage",O);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],V=w("File",P);function Y({value:r,onChange:p,label:x,placeholder:k,error:u,accept:f=".pdf,.jpg,.jpeg,.png",disabled:l=!1,existingFile:n=null,maxSize:i=2,showFileInfo:d=!0}){const[a,h]=o.useState(null),[j,g]=o.useState(null),c=o.useRef(null),N=t=>typeof t=="object"&&t!==null&&t instanceof File;o.useEffect(()=>{if(N(r)){const t=(r.size/1048576).toFixed(2);h({name:r.name,size:`${t} MB`,type:r.type||""})}else h(null);r===null&&c.current&&(c.current.value="")},[r]),o.useEffect(()=>{if(N(r)&&r.type?.startsWith("image/")){const t=URL.createObjectURL(r);return g(t),()=>{URL.revokeObjectURL(t)}}return g(null),()=>{}},[r]);const m=(t,s)=>{const y=t.split(".").pop()?.toLowerCase();return s&&s.includes("pdf")||y==="pdf"?e.jsx(V,{className:"h-8 w-8 text-red-500"}):s&&s.startsWith("image/")||["jpg","jpeg","png","gif","webp","bmp","svg"].includes(y||"")?e.jsx(H,{className:"h-4 w-4 text-blue-500"}):e.jsx(_,{className:"h-8 w-8 text-gray-500"})};function M(){let t="border relative p-0 rounded-lg text-center cursor-pointer transition flex flex-col items-center justify-center relative outline-none";return t+=l?" opacity-60 cursor-not-allowed ":" hover:border-primary ",t+=u?" border-dashed border-destructive ":" border-dashed border-muted-foreground ",t.trim()}function F(t){if(t.preventDefault(),l)return;const s=t.dataTransfer.files?.[0];if(s){if(s.size>i*1024*1024){alert(`File terlalu besar. Maksimal ${i}MB.`);return}p(s)}}function I(t){if(l)return;const s=t.target.files?.[0];if(s){if(s.size>i*1024*1024){alert(`File terlalu besar. Maksimal ${i}MB.`);return}p(s)}}function U(){l||c.current?.click()}function C(t){t.stopPropagation(),!l&&(p(null),c.current&&(c.current.value=""))}const v=!!n,b=!!a,L=v&&/\.(jpg|jpeg|png|gif|webp|bmp|svg)$/i.test(n||"");return e.jsxs("div",{children:[x&&e.jsx(R,{children:x}),e.jsxs(z,{className:M(),onClick:U,onDrop:F,onDragOver:t=>t.preventDefault(),tabIndex:0,role:"button","aria-disabled":l,children:[b||v?e.jsx("div",{className:"w-full relative",children:b?e.jsxs(e.Fragment,{children:[e.jsx(B,{type:"button",variant:"destructive",size:"icon",className:"size-4 p-1 w-4 text-xs absolute top-2 right-2 z-10",onClick:C,disabled:l,children:e.jsx(D,{className:"h-4 w-4"})}),j?e.jsxs("div",{className:"w-full relative",children:[e.jsx("img",{src:j,alt:a?.name||"preview",className:"w-full aspect-video object-cover rounded-md"}),e.jsx("div",{className:"absolute top-2 left-2 p-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[m(a?.name||"",a?.type),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-medium line-clamp-1",children:a?.name}),d&&e.jsx("p",{className:"text-xs opacity-75 line-clamp-1",children:a?.size})]})]})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4",children:[m(a?.name||"",a?.type),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-foreground line-clamp-1",children:a?.name}),d&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:a?.size})]})]})]}):e.jsx("div",{children:L?e.jsxs("div",{className:"w-full relative",children:[e.jsx("img",{src:n,alt:n.split("/").pop()||"",className:"w-full aspect-video object-cover rounded-md"}),e.jsx("div",{className:"absolute top-2 left-2 bg-black/50 text-white p-2 rounded-md",children:e.jsxs("div",{className:"flex items-center gap-2",children:[m(n||""),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-medium line-clamp-1",children:n.split("/").pop()||""}),d&&e.jsx("p",{className:"text-xs opacity-75 line-clamp-1",children:"File yang sudah ada"})]})]})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4",children:[m(n||""),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-foreground line-clamp-1",children:n.split("/").pop()||""}),d&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:"File yang sudah ada"})]})]})})}):e.jsxs("div",{className:"flex flex-col items-center gap-3 py-4",children:[e.jsx(q,{className:"h-6 w-6 text-muted-foreground"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("span",{className:"text-muted-foreground text-sm select-none",children:[k||"Seret dan letakkan file di sini atau ",e.jsx("span",{className:"text-primary font-medium underline",children:"Jelajahi"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Format: ",f.replace(/\./g,"").toUpperCase()," (Maks. ",i,"MB)"]})]})]}),e.jsx(E,{ref:c,type:"file",accept:f,className:"hidden",onChange:I,disabled:l})]}),u&&e.jsx($,{message:u})]})}export{Y as F,H as a};
