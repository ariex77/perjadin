import{j as e,r as n,a as k,t as p,H as P}from"./app-D1xV2MNQ.js";import{c as T}from"./date-DGrPaBmu.js";import{A as D}from"./arrow-up-down-DDMkyO0N.js";import{I as H}from"./input-D287an5N.js";import{T as V,a as K,b as m,c as $,d as F,e as b}from"./table-C9zv8eeL.js";import{u as A}from"./navigation-Dl9NjHSU.js";import{u as E,f as j,g as I,a as U,b as q,c as B}from"./index-CmcrdTLp.js";import{S as G}from"./search-CRdp5riW.js";import{X as J,A as L}from"./app-layout-BMPghDTH.js";import{P as Q}from"./page-header-BNu3XJ9v.js";/* empty css            */import"./format-Ca1hgyLe.js";import"./button-CVReGMi9.js";import"./index-BCddxTNs.js";import"./index-B_9BfV9r.js";import"./users-DMjgkXJI.js";const W=l=>[{id:"no",header:()=>e.jsx("div",{className:"text-center",children:"No"}),cell:({row:t})=>e.jsx("div",{className:"text-center",children:l.from+t.index}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:({column:t})=>e.jsxs("button",{onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),className:"flex items-center px-0",children:["Nama Role",e.jsx(D,{className:"ml-2 h-3 w-3"})]})},{accessorKey:"guard_name",header:"Guard Name",cell:({row:t})=>e.jsx("div",{className:"font-mono text-sm",children:t.original.guard_name})},{accessorKey:"permissions_count",header:()=>e.jsx("div",{className:"text-center",children:"Jumlah Permission"}),cell:({row:t})=>e.jsx("div",{className:"text-center",children:t.original.permissions_count||0})},{accessorKey:"created_at",header:"Tanggal Dibuat",cell:({row:t})=>e.jsx("div",{children:T(t.getValue("created_at"))})}];function X({columns:l,data:t,pagination:s,search:d=""}){const{navigateWithQuery:i}=A(),[v,N]=n.useState([]),[y,w]=n.useState([]),[S,C]=n.useState({}),[o,x]=n.useState(d),{props:R,url:h}=k(),c=R.flash;n.useEffect(()=>{c?.success&&p.success(c.success),c?.error&&p.error(c.error)},[c]);const u=E({data:t,columns:l,onSortingChange:N,onColumnFiltersChange:w,getCoreRowModel:B(),getPaginationRowModel:q(),getSortedRowModel:U(),getFilteredRowModel:I(),onColumnVisibilityChange:C,state:{sorting:v,columnFilters:y,columnVisibility:S}});n.useMemo(()=>h.split("?")[0],[h]);const f=a=>{i("systems.roles.index",{page:a,...o?{search:o}:{}},{preserveScroll:!0,preserveState:!0,replace:!0})},_=a=>{const r=a.target.value;x(r);const g={};r&&(g.search=r),i("systems.roles.index",g,{preserveState:!0,replace:!0})},M=()=>{x(""),i("systems.roles.index",{},{preserveState:!0,replace:!0})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(H,{placeholder:"Cari role...",value:o,onChange:_,className:"pl-8 w-[300px]"}),o&&e.jsx("button",{type:"button",onClick:M,className:"absolute right-2 top-2.5 text-muted-foreground hover:text-foreground",children:e.jsx(J,{className:"h-4 w-4"})})]})})}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(V,{children:[e.jsx(K,{children:u.getHeaderGroups().map(a=>e.jsx(m,{children:a.headers.map(r=>e.jsx($,{children:r.isPlaceholder?null:j(r.column.columnDef.header,r.getContext())},r.id))},a.id))}),e.jsx(F,{children:u.getRowModel().rows?.length?u.getRowModel().rows.map(a=>e.jsx(m,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(r=>e.jsx(b,{children:j(r.column.columnDef.cell,r.getContext())},r.id))},a.id)):e.jsx(m,{children:e.jsx(b,{colSpan:l.length,className:"h-24 text-center",children:"Tidak ada data."})})})]})}),s&&s.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:s?o?`Ditemukan ${s.total} hasil untuk "${o}"`:`Menampilkan ${s.from} - ${s.to} dari ${s.total} hasil`:`Menampilkan ${t.length} hasil`}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>f(s.current_page-1),disabled:s.current_page===1,className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-8 px-3",children:"Sebelumnya"}),e.jsxs("div",{className:"text-sm font-medium",children:["Halaman ",s.current_page," dari ",s.last_page]}),e.jsx("button",{onClick:()=>f(s.current_page+1),disabled:s.current_page===s.last_page,className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-8 px-3",children:"Selanjutnya"})]})]})]})}const Y=[{title:"Dasbor",href:"/dashboard"},{title:"Kelola Role",href:"/systems/roles"}];function xe({roles:l,search:t}){const{data:s,meta:d}=l,i=W(d);return e.jsxs(L,{breadcrumbs:Y,children:[e.jsx(P,{title:"Daftar Role"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx(Q,{title:"Kelola Role",subtitle:"Daftar role di sistem E-Perjadin"}),e.jsx(X,{columns:i,data:s,pagination:d,search:t})]})]})}export{xe as default};
