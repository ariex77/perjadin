import{r as P,u as y,j as e,H as _,t as C}from"./app-2aN5fFIm.js";import{I as i}from"./input-error-CkgwgHgP.js";import{B as p}from"./button-BItv0zFD.js";import{C as E}from"./combobox-ByCsIiY0.js";import{I as o}from"./input-UpUYnzU4.js";import{L as n}from"./label-BH8P7zAC.js";import{P as I}from"./page-header-BuPDwsye.js";import{A as S}from"./app-layout-DB0FO4Gy.js";import{I as T}from"./image-upload-NPQSB8Nm.js";import{S as h}from"./separator-DbH1_Z8_.js";import{M as K}from"./multiselect-CSDTn1Ha.js";import{T as L}from"./textarea-CciHhig-.js";import{E as H}from"./eye-off-BxNPkdBK.js";import{E as R}from"./eye-MQgWJon-.js";/* empty css            */import"./command-BR0mfrEc.js";import"./index--YxB8gKp.js";import"./search-CANJZ9BR.js";import"./popover-CFbJ8920.js";import"./index-CqrHCE41.js";import"./check-DKsR-Bc2.js";import"./users-DL2eMeY0.js";import"./card-CJLns8os.js";import"./input-error-BSEAQUU0.js";import"./upload-DdAPv1vP.js";import"./badge-eJlqMNco.js";const A=[{title:"Dashboard",href:"/dashboard"},{title:"Kelola Pegawai",href:"/masters/employees"},{title:"Tambah",href:""}];function me({workUnits:x,roles:u}){const[m,j]=P.useState(!1),{data:s,setData:r,post:g,processing:d,errors:l,reset:c}=y({name:"",level:"",nip:"",number_phone:"",email:"",username:"",city:"",province:"",address:"",work_unit_id:"",photo:null,password:"",password_confirmation:"",roles:[]});function v(a){r("photo",a)}function f(a){a.preventDefault();const b=new Promise((t,N)=>{g(route("masters.employees.store"),{onSuccess:()=>{t({name:"Pegawai"}),c()},onError:k=>{N(k?.error||"Pegawai gagal ditambahkan!")}})});C.promise(b,{loading:"Memproses..",success:t=>`${t.name} berhasil ditambahkan.`,error:t=>String(t)})}const w=()=>{c()};return e.jsxs(S,{breadcrumbs:A,children:[e.jsx(_,{title:"Tambah Pegawai"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx(I,{title:"Tambah pegawai",subtitle:"Tambahkan pegawai baru untuk E-Lapor Dinas"}),e.jsxs("form",{onSubmit:f,children:[e.jsx("div",{className:"flex w-full flex-col gap-4 md:flex-row",children:e.jsxs("div",{className:"w-full space-y-4 md:w-2/3",children:[e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(T,{value:s.photo,onChange:v,placeholder:"Pilih atau ",error:l.photo,aspectRatio:"rounded"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Nama"}),e.jsx(o,{name:"name",value:s.name||"",onChange:a=>r("name",a.target.value),placeholder:"Nama Pegawai"}),e.jsx(i,{message:l.name,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"NIP"}),e.jsx(o,{type:"number",name:"nip",value:s.nip||"",onChange:a=>r("nip",a.target.value),placeholder:"NIP"}),e.jsx(i,{message:l.nip,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Username"}),e.jsx(o,{name:"username",value:s.username||"",onChange:a=>r("username",a.target.value),placeholder:"Username"}),e.jsx(i,{message:l.username,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Email"}),e.jsx(o,{name:"email",value:s.email||"",onChange:a=>r("email",a.target.value),placeholder:"Email"}),e.jsx(i,{message:l.email,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"No. HP"}),e.jsx(o,{type:"number",name:"number_phone",value:s.number_phone||"",onChange:a=>r("number_phone",a.target.value),placeholder:"No. HP"}),e.jsx(i,{message:l.number_phone,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Pangkat/Golongan"}),e.jsx(o,{name:"level",value:s.level||"",onChange:a=>r("level",a.target.value),placeholder:"Pangkat/Golongan"}),e.jsx(i,{message:l.level,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"work_unit_id",className:"text-sm font-medium",children:"Unit Kerja"}),e.jsx(E,{options:x.map(a=>({value:a.value,label:a.label})),value:s.work_unit_id||void 0,onValueChange:a=>r("work_unit_id",a),placeholder:"Pilih unit kerja",searchPlaceholder:"Cari unit kerja...",emptyText:"Tidak ada unit kerja ditemukan."}),e.jsx(i,{message:l.work_unit_id,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"roles",className:"text-sm font-medium",children:"Role"}),e.jsx(K,{value:s.roles,onChange:a=>r("roles",a),options:u.map(a=>({value:a.name||"",label:a.name==="employee"?"Pegawai":a.name==="leader"?"Pimpinan":a.name==="verificator"?"Verifikator":a.name||""})),placeholder:"Pilih role",className:"w-full"}),e.jsx(i,{message:l.roles,className:"mt-1"}),s.roles.includes("leader")&&e.jsxs("div",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-md border border-amber-200",children:[e.jsx("strong",{children:"Info:"})," Jika unit kerja sudah memiliki pimpinan, pimpinan baru akan menggantikan pimpinan lama. Pimpinan lama tetap dapat mengakses data historis review yang sudah dilakukan."]})]})]}),e.jsx(h,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Kota"}),e.jsx(o,{name:"city",value:s.city||"",onChange:a=>r("city",a.target.value),placeholder:"Kota"}),e.jsx(i,{message:l.city,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Provinsi"}),e.jsx(o,{name:"province",value:s.province||"",onChange:a=>r("province",a.target.value),placeholder:"Provinsi"}),e.jsx(i,{message:l.province,className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Alamat Lengkap"}),e.jsx(L,{name:"address",value:s.address,onChange:a=>r("address",a.target.value),placeholder:"Alamat Lengkap"}),e.jsx(i,{message:l.address,className:"mt-1"})]}),e.jsx(h,{}),e.jsxs("div",{className:"w-full space-y-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{type:m?"text":"password",name:"password",value:s.password||"",onChange:a=>r("password",a.target.value),placeholder:"Password"}),e.jsx("button",{type:"button",onClick:()=>j(!m),className:"absolute top-1/2 right-3 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:m?e.jsx(H,{size:18}):e.jsx(R,{size:18})})]}),e.jsx(i,{message:l.password,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Konfirmasi Password"}),e.jsx("div",{className:"relative",children:e.jsx(o,{type:m?"text":"password",name:"password_confirmation",value:s.password_confirmation||"",onChange:a=>r("password_confirmation",a.target.value),placeholder:"Konfirmasi Password"})}),e.jsx(i,{message:l.password_confirmation,className:"mt-1"})]})]})]})}),e.jsxs("div",{className:"flex max-w-3xl flex-col gap-3 pt-4 sm:flex-row",children:[e.jsx(p,{type:"button",variant:"outline",onClick:w,className:"flex-1 bg-transparent sm:flex-none",disabled:d,children:"Reset"}),e.jsx(p,{type:"submit",disabled:d,className:"flex-1 sm:flex-none",children:d?"Memproses...":"Simpan"})]})]})]})]})}export{me as default};
