import{u as E,r as u,j as e,t as M}from"./app-2aN5fFIm.js";import{A as S}from"./app-layout-DB0FO4Gy.js";import{P as C}from"./page-header-BuPDwsye.js";import{B as c}from"./button-BItv0zFD.js";import{I as F}from"./input-UpUYnzU4.js";import{L as d}from"./label-BH8P7zAC.js";import{T}from"./textarea-CciHhig-.js";import{D as h}from"./date-picker-DF9xSYJ6.js";import{M as A}from"./multiselect-CSDTn1Ha.js";import{I as n}from"./input-error-CkgwgHgP.js";import{f as x}from"./format-Ca1hgyLe.js";/* empty css            */import"./index-CqrHCE41.js";import"./index--YxB8gKp.js";import"./users-DL2eMeY0.js";import"./chevron-left-CxbVlA3U.js";import"./chevron-down-aBmeQNG4.js";import"./popover-CFbJ8920.js";import"./calendar-my65S406.js";import"./command-BR0mfrEc.js";import"./search-CANJZ9BR.js";import"./badge-eJlqMNco.js";import"./check-DKsR-Bc2.js";const I=[{title:"Dasbor",href:"/dashboard"},{title:"Penugasan",href:"/assignments"},{title:"Edit Penugasan",href:"/assignments/edit"}];function ie({assignment:a,users:g}){const{data:t,setData:r,put:f,processing:l,errors:i,reset:j}=E({purpose:a.purpose||"",destination:a.destination||"",start_date:a.start_date||"",end_date:a.end_date||"",user_ids:a.user_ids||[]});u.useEffect(()=>{console.log("Assignment user_ids:",a.user_ids),console.log("Form data user_ids:",t.user_ids)},[a.user_ids,t.user_ids]);const[_,m]=u.useState(t.start_date?new Date(t.start_date):void 0),[v,p]=u.useState(t.end_date?new Date(t.end_date):void 0),N=s=>{m(s),r("start_date",s?x(s,"yyyy-MM-dd"):"")},b=s=>{p(s),r("end_date",s?x(s,"yyyy-MM-dd"):"")};function y(s){s.preventDefault();const w=new Promise((o,D)=>{f(route("assignments.update",a.id),{onSuccess:()=>{o({name:"Penugasan"})},onError:k=>{D(k?.error||"Penugasan gagal diperbarui!")}})});M.promise(w,{loading:"Memproses..",success:o=>`${o.name} berhasil diperbarui.`,error:o=>String(o)})}const P=()=>{j(),m(a.start_date?new Date(a.start_date):void 0),p(a.end_date?new Date(a.end_date):void 0),r("user_ids",a.user_ids||[])};return e.jsx(S,{breadcrumbs:I,children:e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx(C,{title:"Edit Penugasan",subtitle:"Perbarui data penugasan dinas"}),e.jsx("div",{className:"max-w-lg",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"purpose",children:"Tujuan Penugasan"}),e.jsx(T,{id:"purpose",value:t.purpose,onChange:s=>r("purpose",s.target.value),placeholder:"Jelaskan tujuan dan maksud penugasan dinas",rows:3,required:!0}),e.jsx(n,{message:i.purpose,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"destination",children:"Tujuan Lokasi"}),e.jsx(F,{id:"destination",value:t.destination,onChange:s=>r("destination",s.target.value),placeholder:"Masukkan lokasi tujuan penugasan",required:!0}),e.jsx(n,{message:i.destination,className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"start_date",children:"Tanggal Mulai"}),e.jsx(h,{value:_,onChange:N,placeholder:"Pilih tanggal mulai",className:"w-full"}),e.jsx(n,{message:i.start_date,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"end_date",children:"Tanggal Selesai"}),e.jsx(h,{value:v,onChange:b,placeholder:"Pilih tanggal selesai",className:"w-full"}),e.jsx(n,{message:i.end_date,className:"mt-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"user_ids",children:"Pegawai"}),e.jsx(A,{value:t.user_ids,onChange:s=>r("user_ids",s),options:g,placeholder:"Pilih pegawai...",className:"w-full"}),e.jsx(n,{message:i.user_ids,className:"mt-1"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pilih satu atau lebih pegawai untuk ditugaskan"})]}),e.jsxs("div",{className:"flex flex-col gap-3 pt-4 sm:flex-row",children:[e.jsx(c,{type:"button",variant:"outline",onClick:P,className:"flex-1 bg-transparent sm:flex-none",disabled:l,children:"Reset"}),e.jsx(c,{type:"submit",disabled:l,className:"flex-1 sm:flex-none",children:l?"Memproses...":"Simpan Perubahan"})]})]})})]})})}export{ie as default};
