import{r as y,u as C,j as e,H as _,t as E}from"./app-DcC59gM4.js";import{B as p}from"./button-CpjRaYVo.js";import{C as h}from"./combobox-Bbq5Jssc.js";import{I}from"./image-upload-DNTbj_mr.js";import{I as o}from"./input-B_FIGcdk.js";import{I as i}from"./input-error-C6nxwA3J.js";import{L as n}from"./label-DnZ7SDYy.js";import{M as T}from"./multiselect-sUPoWkYM.js";import{P as S}from"./page-header-C_7k5sLc.js";import{S as x}from"./separator-DyCgdMap.js";import{T as K}from"./textarea-CIYggA85.js";import{A as L}from"./app-layout-md0N9P8I.js";import{E as F}from"./eye-off-B6XtsINA.js";import{E as H}from"./eye-B5TCxU7g.js";/* empty css            */import"./command-BSOzza0P.js";import"./index-CAOgDV9q.js";import"./search-CFhtlakL.js";import"./popover-QUURE3mk.js";import"./index-CcsY0bVV.js";import"./check-CoDZEjDS.js";import"./card-B1wzXt6A.js";import"./input-error-CwjUQo6T.js";import"./upload-XjPs63n1.js";import"./badge-CyCmFY9U.js";import"./users-DLXe7dN4.js";const M=[{title:"Dashboard",href:"/dashboard"},{title:"Kelola Pegawai",href:"/masters/employees"},{title:"Tambah",href:""}];function te({workUnits:u,roles:j}){const[t,g]=y.useState(!1),{data:s,setData:r,post:v,processing:d,errors:l,reset:c}=C({name:"",level:"",nip:"",number_phone:"",email:"",username:"",gender:"",city:"",province:"",address:"",work_unit_id:"",photo:null,password:"",password_confirmation:"",roles:[]});function f(a){r("photo",a)}function w(a){a.preventDefault();const N=new Promise((m,k)=>{v(route("masters.employees.store"),{onSuccess:()=>{m({name:"Pegawai"}),c()},onError:P=>{k(P?.error||"Pegawai gagal ditambahkan!")}})});E.promise(N,{loading:"Memproses..",success:m=>`${m.name} berhasil ditambahkan.`,error:m=>String(m)})}const b=()=>{c()};return e.jsxs(L,{breadcrumbs:M,children:[e.jsx(_,{title:"Tambah Pegawai"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx(S,{title:"Tambah pegawai",subtitle:"Tambahkan pegawai baru untuk E-Lapor Dinas"}),e.jsxs("form",{onSubmit:w,children:[e.jsx("div",{className:"flex w-full flex-col gap-4 md:flex-row",children:e.jsxs("div",{className:"w-full space-y-4 md:w-2/3",children:[e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(I,{value:s.photo,onChange:f,placeholder:"Pilih atau ",error:l.photo,aspectRatio:"rounded"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Nama"}),e.jsx(o,{name:"name",value:s.name||"",onChange:a=>r("name",a.target.value),placeholder:"Nama Pegawai"}),e.jsx(i,{message:l.name,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"NIP"}),e.jsx(o,{type:"number",name:"nip",value:s.nip||"",onChange:a=>r("nip",a.target.value),placeholder:"NIP"}),e.jsx(i,{message:l.nip,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Username"}),e.jsx(o,{name:"username",value:s.username||"",onChange:a=>r("username",a.target.value),placeholder:"Username"}),e.jsx(i,{message:l.username,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Email"}),e.jsx(o,{name:"email",value:s.email||"",onChange:a=>r("email",a.target.value),placeholder:"Email"}),e.jsx(i,{message:l.email,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"No. HP"}),e.jsx(o,{type:"number",name:"number_phone",value:s.number_phone||"",onChange:a=>r("number_phone",a.target.value),placeholder:"No. HP"}),e.jsx(i,{message:l.number_phone,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Pangkat/Golongan"}),e.jsx(o,{name:"level",value:s.level||"",onChange:a=>r("level",a.target.value),placeholder:"Pangkat/Golongan"}),e.jsx(i,{message:l.level,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"gender",children:"Jenis Kelamin"}),e.jsx(h,{options:[{value:"Male",label:"Laki-laki"},{value:"Female",label:"Perempuan"}],value:s.gender,onValueChange:a=>r("gender",a),placeholder:"Pilih jenis kelamin",searchPlaceholder:"Cari jenis kelamin...",emptyText:"Tidak ada jenis kelamin ditemukan."}),e.jsx(i,{className:"mt-2",message:l.gender})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"work_unit_id",className:"text-sm font-medium",children:"Unit Kerja"}),e.jsx(h,{options:u.map(a=>({value:a.value,label:a.label})),value:s.work_unit_id||void 0,onValueChange:a=>r("work_unit_id",a),placeholder:"Pilih unit kerja",searchPlaceholder:"Cari unit kerja...",emptyText:"Tidak ada unit kerja ditemukan."}),e.jsx(i,{message:l.work_unit_id,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"roles",className:"text-sm font-medium",children:"Role"}),e.jsx(T,{value:s.roles,onChange:a=>r("roles",a),options:j.map(a=>({value:a.name||"",label:a.name==="employee"?"Pegawai":a.name==="leader"?"Pimpinan":a.name==="verificator"?"Verifikator":a.name||""})),placeholder:"Pilih role",className:"w-full"}),e.jsx(i,{message:l.roles,className:"mt-1"}),s.roles.includes("leader")&&e.jsxs("div",{className:"rounded-md border border-amber-200 bg-amber-50 p-3 text-sm text-amber-600",children:[e.jsx("strong",{children:"Info:"})," Jika unit kerja sudah memiliki pimpinan, pimpinan baru akan menggantikan pimpinan lama. Pimpinan lama tetap dapat mengakses data historis review yang sudah dilakukan."]})]})]}),e.jsx(x,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Kota"}),e.jsx(o,{name:"city",value:s.city||"",onChange:a=>r("city",a.target.value),placeholder:"Kota"}),e.jsx(i,{message:l.city,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Provinsi"}),e.jsx(o,{name:"province",value:s.province||"",onChange:a=>r("province",a.target.value),placeholder:"Provinsi"}),e.jsx(i,{message:l.province,className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Alamat Lengkap"}),e.jsx(K,{name:"address",value:s.address,onChange:a=>r("address",a.target.value),placeholder:"Alamat Lengkap"}),e.jsx(i,{message:l.address,className:"mt-1"})]}),e.jsx(x,{}),e.jsxs("div",{className:"grid w-full grid-cols-2 gap-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{type:t?"text":"password",name:"password",value:s.password||"",onChange:a=>r("password",a.target.value),placeholder:"Password"}),e.jsx("button",{type:"button",onClick:()=>g(!t),className:"absolute top-1/2 right-3 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:t?e.jsx(F,{size:18}):e.jsx(H,{size:18})})]}),e.jsx(i,{message:l.password,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Konfirmasi Password"}),e.jsx("div",{className:"relative",children:e.jsx(o,{type:t?"text":"password",name:"password_confirmation",value:s.password_confirmation||"",onChange:a=>r("password_confirmation",a.target.value),placeholder:"Konfirmasi Password"})}),e.jsx(i,{message:l.password_confirmation,className:"mt-1"})]})]})]})}),e.jsxs("div",{className:"flex max-w-3xl flex-col gap-3 pt-4 sm:flex-row",children:[e.jsx(p,{type:"button",variant:"outline",onClick:b,className:"flex-1 bg-transparent sm:flex-none",disabled:d,children:"Reset"}),e.jsx(p,{type:"submit",disabled:d,className:"flex-1 sm:flex-none",children:d?"Memproses...":"Simpan"})]})]})]})]})}export{te as default};
