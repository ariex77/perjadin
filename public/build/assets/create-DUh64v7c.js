import{u as F,j as e,H as D,t as T}from"./app-2aN5fFIm.js";import{P as L}from"./page-header-BuPDwsye.js";import{C as j,a as g,e as _,b as f}from"./card-CJLns8os.js";import{B as v}from"./button-BItv0zFD.js";import{I as N}from"./input-UpUYnzU4.js";import{L as i}from"./label-BH8P7zAC.js";import{S as w,a as M,b as B,c as I,e as u}from"./select-D1oL0Oy2.js";import{F as y}from"./file-upload-BgPXnGNz.js";import{C as A}from"./checkbox-vgXjnkEL.js";import{I as d}from"./input-error-CkgwgHgP.js";import{A as R}from"./app-layout-DB0FO4Gy.js";/* empty css            */import"./index--YxB8gKp.js";import"./index-CqrHCE41.js";import"./index-ClaHt7Hp.js";import"./chevron-down-aBmeQNG4.js";import"./check-DKsR-Bc2.js";import"./input-error-BSEAQUU0.js";import"./upload-DdAPv1vP.js";import"./users-DL2eMeY0.js";const H=[{title:"Dashboard",href:"/dashboard"},{title:"Penugasan",href:"/assignments"},{title:"Buat Laporan",href:""}];function te({assignment_id:p,assignment:o,transportation_types:c}){const{data:s,setData:l,post:b,processing:x,errors:n}=F({assignment_id:p||"",travel_type:"",actual_duration:"",transportation_type_ids:[],travel_order_number:"",travel_order_file:null,spd_file:null}),S=(a,t)=>{if(t){if(!s.transportation_type_ids.includes(a)){const r=[...s.transportation_type_ids,a];l("transportation_type_ids",r)}}else{const r=s.transportation_type_ids.filter(m=>m!==a);l("transportation_type_ids",r)}},C=a=>{a.preventDefault();const t=new Promise((r,m)=>{b(route("reports.store"),{onSuccess:()=>{r({name:"Laporan"})},onError:P=>{m(P?.error||"Laporan gagal dibuat!")}})});T.promise(t,{loading:"Memproses..",success:r=>`${r.name} berhasil dibuat.`,error:r=>String(r)})},h=(a,t)=>{l(a,t)},k=()=>{l({assignment_id:p||"",travel_type:"",actual_duration:"",transportation_type_ids:[],travel_order_number:"",travel_order_file:null,spd_file:null})};return e.jsxs(R,{breadcrumbs:H,children:[e.jsx(D,{title:"Buat Laporan Perjalanan"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx(L,{title:"Buat Laporan Perjalanan",subtitle:"Buat laporan pertanggung jawaban perjalanan dinas"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(j,{children:[e.jsx(g,{children:e.jsx(_,{children:"Form Laporan Perjalanan"})}),e.jsx(f,{children:e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"travel_type",children:"Tipe Perjalanan"}),e.jsxs(w,{value:s.travel_type,onValueChange:a=>l("travel_type",a),children:[e.jsx(M,{children:e.jsx(B,{placeholder:"Pilih tipe perjalanan"})}),e.jsxs(I,{children:[e.jsx(u,{value:"in_city",children:"Dalam Kota"}),e.jsx(u,{value:"out_city",children:"Luar Kota"}),e.jsx(u,{value:"out_country",children:"Luar Negeri"})]})]}),e.jsx(d,{message:n.travel_type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"transportation_type_ids",children:"Jenis Transportasi"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:c&&Array.isArray(c)&&c.length>0?c.map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:`transportation_${a.id}`,checked:s.transportation_type_ids.includes(a.id),onCheckedChange:t=>S(a.id,t)}),e.jsx(i,{htmlFor:`transportation_${a.id}`,className:"text-sm font-normal cursor-pointer",children:a.label})]},a.id)):e.jsx("div",{className:"col-span-3",children:e.jsx("p",{className:"text-sm text-gray-500",children:c?"Tidak ada jenis transportasi tersedia":"Memuat jenis transportasi..."})})}),e.jsx(d,{message:n.transportation_type_ids}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pilih satu atau lebih jenis transportasi yang digunakan"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"space-y-2 w-full md:w-3/4",children:[e.jsx(i,{htmlFor:"travel_order_number",children:"Nomor Surat Tugas"}),e.jsx(N,{id:"travel_order_number",value:s.travel_order_number,onChange:a=>l("travel_order_number",a.target.value),placeholder:"Masukkan nomor surat tugas",required:!0}),e.jsx(d,{message:n.travel_order_number})]}),e.jsxs("div",{className:"space-y-2 w-full md:w-1/4",children:[e.jsx(i,{htmlFor:"actual_duration",children:"Durasi Asli Perjalanan"}),e.jsx(N,{id:"actual_duration",type:"number",min:1,value:s.actual_duration,onChange:a=>l("actual_duration",a.target.value),placeholder:"Durasi asli perjalanan",required:!0}),e.jsx(d,{message:n.actual_duration})]})]}),o&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Informasi Penugasan"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Tujuan:"}),e.jsx("p",{className:"text-gray-600",children:o.destination})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Maksud:"}),e.jsx("p",{className:"text-gray-600",children:o.purpose})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Tanggal Mulai:"}),e.jsx("p",{className:"text-gray-600",children:o.start_date})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Tanggal Selesai:"}),e.jsx("p",{className:"text-gray-600",children:o.end_date})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"travel_order_file",children:"File Surat Tugas"}),e.jsx(y,{value:s.travel_order_file,onChange:a=>h("travel_order_file",a),accept:".pdf,.doc,.docx",maxSize:5,placeholder:"Seret dan letakkan file di sini atau jelajahi"}),e.jsx(d,{message:n.travel_order_file})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"spd_file",children:"File SPD (Surat Perintah Dinas)"}),e.jsx(y,{value:s.spd_file,onChange:a=>h("spd_file",a),accept:".pdf,.doc,.docx",maxSize:5,placeholder:"Seret dan letakkan file di sini atau "}),e.jsx(d,{message:n.spd_file})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{type:"button",variant:"outline",onClick:k,children:"Reset"}),e.jsx(v,{type:"submit",disabled:x,children:x?"Menyimpan...":"Simpan Laporan"})]})]})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(j,{children:[e.jsx(g,{children:e.jsx(_,{children:"Informasi"})}),e.jsxs(f,{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx("p",{children:"Pastikan semua informasi yang dimasukkan sudah benar dan lengkap."})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("h4",{className:"font-medium mb-2",children:"File yang Diperlukan:"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Surat Tugas (PDF/DOC)"}),e.jsx("li",{children:"• SPD - Surat Perintah Dinas (PDF/DOC)"})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Ukuran Maksimal:"}),e.jsx("p",{className:"text-muted-foreground",children:"5MB per file"})]})]})]})})]})]})]})}export{te as default};
