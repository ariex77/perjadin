import{j as e,r as o,u as X,a as Y,t as r,H as G}from"./app-2aN5fFIm.js";import{C as T}from"./checkbox-vgXjnkEL.js";import{c as J}from"./date-DGrPaBmu.js";import{a as Z}from"./format-DrnYISXt.js";import{A as H}from"./arrow-up-down-nUe5HL08.js";import{B as m}from"./button-BItv0zFD.js";import{D as ee,T as se}from"./delete-dialog-DGccrk8d.js";import{I as ae}from"./input-UpUYnzU4.js";import{T as te,a as le,b as C,c as re,d as ie,e as P}from"./table-pME_9Ta5.js";import{u as oe}from"./navigation-56qOGQYv.js";import{u as ne,f as _,g as ce,a as de,b as me,c as ue}from"./index-CJTWCbOS.js";import{S as ge}from"./search-CANJZ9BR.js";import{X as he,C as pe,A as fe}from"./app-layout-DB0FO4Gy.js";import{P as xe}from"./plus-CGtWbrtX.js";import{C as be}from"./chevron-left-CxbVlA3U.js";import{P as je}from"./page-header-BuPDwsye.js";/* empty css            */import"./index-CqrHCE41.js";import"./index-ClaHt7Hp.js";import"./index--YxB8gKp.js";import"./check-DKsR-Bc2.js";import"./format-Ca1hgyLe.js";import"./eye-MQgWJon-.js";import"./alert-dialog-D6zYjwZl.js";import"./users-DL2eMeY0.js";const Se=u=>[{id:"select",header:({table:t})=>e.jsx(T,{checked:t.getIsAllPageRowsSelected()||t.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>t.toggleAllPageRowsSelected(!!a),"aria-label":"Select all"}),cell:({row:t})=>e.jsx(T,{checked:t.getIsSelected(),onCheckedChange:a=>t.toggleSelected(!!a),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{id:"no",header:()=>e.jsx("div",{className:"text-center",children:"No"}),cell:({row:t})=>e.jsx("div",{className:"text-center",children:u.from+t.index}),enableSorting:!1,enableHiding:!1},{accessorKey:"province_name",header:({column:t})=>e.jsxs("button",{onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),className:"flex items-center px-0",children:["Provinsi",e.jsx(H,{className:"ml-2 h-3 w-3"})]})},{accessorKey:"price",header:({column:t})=>e.jsxs("button",{onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),className:"flex items-center px-0",children:["Harga",e.jsx(H,{className:"ml-2 h-3 w-3"})]}),cell:({row:t})=>{const a=t.getValue("price");return e.jsxs("div",{className:"tabular-nums",children:["Rp ",Z(a,{minimumFractionDigits:0,maximumFractionDigits:0})]})}},{accessorKey:"created_at",header:"Tanggal Dibuat",cell:({row:t})=>e.jsx("div",{children:J(t.getValue("created_at"))})},{id:"actions",header:"Aksi",cell:()=>null,enableSorting:!1,enableHiding:!1}];function we({columns:u,data:t,pagination:a,search:p=""}){const{navigateToCreate:f,navigateToEdit:M,navigateWithQuery:x}=oe(),[I,A]=o.useState([]),[F,V]=o.useState([]),[E,$]=o.useState({}),[B,b]=o.useState({}),[n,k]=o.useState(p),[K,c]=o.useState(!1),[N,g]=o.useState(null),[j,R]=o.useState("single"),{delete:z,post:U,processing:D,setData:S}=X({ids:[]}),{props:q}=Y(),h=q.flash;o.useEffect(()=>{h?.success&&r.success(h.success),h?.error&&r.error(h.error)},[h]);const d=ne({data:t,columns:u,onSortingChange:A,onColumnFiltersChange:V,getCoreRowModel:ue(),getPaginationRowModel:me(),getSortedRowModel:de(),getFilteredRowModel:ce(),onColumnVisibilityChange:$,onRowSelectionChange:b,state:{sorting:I,columnFilters:F,columnVisibility:E,rowSelection:B}}),L=()=>{const s=d.getSelectedRowModel().rows.map(i=>i.original.id);S("ids",s),R("bulk"),c(!0)},O=l=>{g(l),R("single"),c(!0)},Q=()=>{j==="single"&&N?z(route("masters.fullboard-prices.destroy",N),{onBefore:()=>{r.loading("Sedang memproses...")},onSuccess:()=>{c(!1),b({}),g(null),d.resetRowSelection(),r.dismiss()},onError:()=>{c(!1),g(null),r.dismiss(),r.error("Terjadi kesalahan saat menghapus harga fullboard.")}}):U(route("masters.fullboard-prices.bulk-delete"),{onBefore:()=>{r.loading("Sedang memproses...")},onSuccess:()=>{c(!1),b({}),g(null),d.resetRowSelection(),S("ids",[]),r.dismiss()},onError:()=>{c(!1),g(null),r.dismiss(),S("ids",[]),r.error("Terjadi kesalahan saat menghapus harga fullboard.")}})},w=l=>{const s={};l>1&&(s.page=l),n&&(s.search=n),x("masters.fullboard-prices.index",s,{preserveState:!0,replace:!0})},W=l=>{const s=l.target.value;k(s);const i={};s&&(i.search=s),x("masters.fullboard-prices.index",i,{preserveState:!0,replace:!0})},y=()=>{k(""),x("masters.fullboard-prices.index",{},{preserveState:!0,replace:!0})},v=d.getSelectedRowModel().rows.length;return e.jsxs("div",{className:"w-full space-y-4",children:[e.jsx(ee,{open:K,onOpenChange:c,onDelete:Q,title:j==="single"?"Hapus harga fullboard?":"Hapus harga fullboard yang dipilih?",description:j==="single"?"Tindakan ini tidak dapat dibatalkan. harga fullboard ini akan dihapus secara permanen dari sistem.":`Tindakan ini tidak dapat dibatalkan. ${v} harga fullboard yang dipilih akan dihapus secara permanen dari sistem.`,disabled:D}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(ge,{className:"absolute top-2.5 left-2 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{placeholder:"Cari harga fullboard...",value:n,onChange:W,className:"w-full pr-8 pl-8 md:w-[300px]"}),n&&e.jsx(m,{variant:"ghost",size:"sm",onClick:y,className:"absolute top-0 right-0 h-full px-3 hover:bg-transparent",children:e.jsx(he,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{onClick:()=>f("masters.fullboard-prices"),children:[e.jsx(xe,{className:"h-4 w-4"}),"Tambah"]}),v>0&&e.jsxs(m,{variant:"destructive",onClick:L,disabled:D,children:["Hapus (",v,")"]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(te,{children:[e.jsx(le,{children:d.getHeaderGroups().map(l=>e.jsx(C,{children:l.headers.map(s=>e.jsx(re,{className:s.id==="actions"?"w-[100px]":s.id==="no"?"w-[50px]":s.id==="select"?"w-[32px]":void 0,children:s.isPlaceholder?null:_(s.column.columnDef.header,s.getContext())},s.id))},l.id))}),e.jsx(ie,{children:d.getRowModel().rows?.length?d.getRowModel().rows.map(l=>e.jsx(C,{"data-state":l.getIsSelected()&&"selected",children:l.getVisibleCells().map(s=>e.jsx(P,{className:s.column.id==="actions"?"w-[100px]":s.column.id==="no"?"w-[50px]":s.column.id==="select"?"w-[32px]":void 0,children:s.column.id==="actions"?e.jsx(se,{onEdit:()=>M("masters.fullboard-prices",l.original.id),onDelete:()=>O(l.original.id)}):_(s.column.columnDef.cell,s.getContext())},s.id))},l.id)):e.jsx(C,{children:e.jsx(P,{colSpan:u.length,className:"h-24 text-center",children:n?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("p",{children:['Tidak ada harga fullboard yang ditemukan untuk pencarian "',n,'"']}),e.jsx(m,{variant:"outline",size:"sm",onClick:y,children:"Hapus pencarian"})]}):"harga fullboard tidak tersedia."})})})]})}),t.length>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:a?n?`Ditemukan ${a.total} hasil untuk "${n}"`:`Menampilkan ${a.from} - ${a.to} dari ${a.total} hasil`:`Menampilkan ${t.length} hasil`}),a&&a.last_page>1&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>w(a.current_page-1),disabled:a.current_page===1,children:e.jsx(be,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-1",children:[Array.from({length:Math.min(5,a.last_page)},(l,s)=>{const i=s+1;return a.last_page<=5?e.jsx(m,{variant:a.current_page===i?"default":"outline",size:"sm",onClick:()=>w(i),className:"h-8 w-8 p-0",children:i},i):null}),a.last_page>5&&e.jsxs("span",{className:"px-2 text-sm text-muted-foreground",children:["Page ",a.current_page," of ",a.last_page]})]}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>w(a.current_page+1),disabled:a.current_page===a.last_page,children:e.jsx(pe,{className:"h-4 w-4"})})]})]})]})}const ve=[{title:"Dasbor",href:"/dashboard"},{title:"Kelola Uang Harian",href:"/masters/fullboard-prices"}];function We({FullboardPrices:u,search:t}){const{data:a,meta:p}=u,f=Se(p);return e.jsxs(fe,{breadcrumbs:ve,children:[e.jsx(G,{title:"Kelola Harga Uang Harian"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx(je,{title:"Kelola Harga Uang Harian",subtitle:"Daftar harga uang harian di E-Lapor Dinas"}),e.jsx(we,{columns:f,data:a,pagination:p,search:t})]})]})}export{We as default};
