import{r as u,j as r}from"./app-2aN5fFIm.js";import{C as y}from"./card-CJLns8os.js";import{L as N}from"./label-BH8P7zAC.js";import{B as C}from"./button-BItv0zFD.js";import{I}from"./input-UpUYnzU4.js";import{I as k}from"./input-error-BSEAQUU0.js";import{X as D}from"./app-layout-DB0FO4Gy.js";import{U}from"./upload-DdAPv1vP.js";function z({value:n,onChange:o,label:f=void 0,placeholder:p,error:a,accept:x="image/*",disabled:t=!1,existingImage:l=null,showPreview:q=!0,aspectRatio:s=void 0}){const[i,c]=u.useState(null),d=u.useRef(null);u.useEffect(()=>{if(n&&n instanceof File){const e=URL.createObjectURL(n);return c(e),()=>URL.revokeObjectURL(e)}else c(null)},[n]);const m=i||(l?l.startsWith("http")?l:`/storage/${l}`:null);function h(){let e="border relative p-0 rounded-lg text-center cursor-pointer transition flex flex-col items-center justify-center relative outline-none overflow-hidden";return t?e+="opacity-60 cursor-not-allowed ":e+="hover:border-primary ",a?e+="border-dashed border-destructive ":e+="border-dashed border-muted-foreground ",s==="video"?e+="aspect-video w-full max-w-lg ":s==="square"?e+="aspect-square w-48 ":s==="rounded"&&(e+="aspect-square w-32 rounded-full "),e.trim()}function v(){return s==="square"?"w-full h-full object-cover aspect-square rounded-md":s==="rounded"?"w-full h-full object-cover aspect-square rounded-full":s==="video"?"w-full h-full object-cover aspect-video rounded-md":"w-full h-full object-cover rounded-md"}function j(e){e.preventDefault(),!t&&e.dataTransfer.files&&e.dataTransfer.files[0]&&o(e.dataTransfer.files[0])}function g(e){t||e.target.files&&e.target.files[0]&&o(e.target.files[0])}function w(){t||d.current?.click()}function b(e){e.stopPropagation(),t||o(null)}return r.jsxs("div",{children:[f&&r.jsx(N,{children:f}),r.jsxs(y,{className:h(),onClick:w,onDrop:j,onDragOver:e=>e.preventDefault(),tabIndex:0,role:"button","aria-disabled":t,children:[m?r.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[r.jsx("img",{src:m,alt:"Preview",className:v()}),i&&r.jsxs(C,{type:"button",variant:"destructive",size:"xs",className:"text-xs absolute right-1 top-1",onClick:b,disabled:t,children:[" ",r.jsx(D,{})," "]})]}):r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(U,{className:"text-muted-foreground"}),r.jsxs("span",{className:"text-muted-foreground text-xs select-none",children:[p||"Seret dan letakkan gambar di sini ",r.jsx("span",{className:"text-primary font-medium underline",children:"Jelajahi"})]})]}),r.jsx(I,{ref:d,type:"file",accept:x,className:"hidden",onChange:g,disabled:t})]}),a&&r.jsx(k,{message:a})]})}export{z as I};
