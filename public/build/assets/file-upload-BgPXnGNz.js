import{r as f,j as e}from"./app-2aN5fFIm.js";import{C as M}from"./card-CJLns8os.js";import{L as z}from"./label-BH8P7zAC.js";import{c as g,B as C}from"./button-BItv0zFD.js";import{I}from"./input-UpUYnzU4.js";import{I as B}from"./input-error-BSEAQUU0.js";import{X as L}from"./app-layout-DB0FO4Gy.js";import{U as R}from"./upload-DdAPv1vP.js";import{F as U}from"./users-DL2eMeY0.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],D=g("FileImage",$);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],q=g("File",F);function P({value:l,onChange:m,label:x=void 0,placeholder:N,error:p,accept:u=".pdf,.jpg,.jpeg,.png",disabled:n=!1,existingFile:a=null,maxSize:c=2,showFileInfo:o=!0}){const[s,h]=f.useState(null),i=f.useRef(null);f.useEffect(()=>{if(l&&typeof l=="object"&&"name"in l&&"size"in l){const t=l,r=(t.size/(1024*1024)).toFixed(2);h({name:t.name,size:`${r} MB`,type:t.type})}else h(null);l===null&&i.current&&(i.current.value="")},[l]);const d=(t,r)=>{const j=t.split(".").pop()?.toLowerCase();return r?.includes("pdf")||j==="pdf"?e.jsx(q,{className:"h-8 w-8 text-red-500"}):r?.includes("image")||["jpg","jpeg","png"].includes(j||"")?e.jsx(D,{className:"h-4 w-4 text-blue-500"}):e.jsx(U,{className:"h-8 w-8 text-gray-500"})};function v(){let t="border relative p-0 rounded-lg text-center cursor-pointer transition flex flex-col items-center justify-center relative outline-none";return n?t+="opacity-60 cursor-not-allowed ":t+="hover:border-primary ",p?t+="border-dashed border-destructive ":t+="border-dashed border-muted-foreground ",t.trim()}function y(t){if(t.preventDefault(),!n&&t.dataTransfer.files&&t.dataTransfer.files[0]){const r=t.dataTransfer.files[0];if(r.size>c*1024*1024){alert(`File terlalu besar. Maksimal ${c}MB.`);return}m(r)}}function b(t){if(!n&&t.target.files&&t.target.files[0]){const r=t.target.files[0];if(r.size>c*1024*1024){alert(`File terlalu besar. Maksimal ${c}MB.`);return}m(r)}}function k(){n||i.current?.click()}function w(t){t.stopPropagation(),n||(m(null),i.current&&(i.current.value=""))}return e.jsxs("div",{children:[x&&e.jsx(z,{children:x}),e.jsxs(M,{className:v(),onClick:k,onDrop:y,onDragOver:t=>t.preventDefault(),tabIndex:0,role:"button","aria-disabled":n,children:[s||a?e.jsx("div",{className:"w-full relative",children:s?e.jsxs(e.Fragment,{children:[e.jsx(C,{type:"button",variant:"destructive",size:"icon",className:"size-4 p-1 w-4 text-xs absolute top-2 right-2 z-10",onClick:w,disabled:n,children:e.jsx(L,{className:"h-4 w-4"})}),s.type.startsWith("image/")&&e.jsxs("div",{className:"w-full relative",children:[e.jsx("img",{src:URL.createObjectURL(l),alt:s.name,className:"w-full aspect-video object-cover rounded-md"}),e.jsx("div",{className:"absolute top-2 left-2 p-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[d(s.name,s.type),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-medium line-clamp-1",children:s.name}),o&&e.jsx("p",{className:"text-xs opacity-75 line-clamp-1",children:s.size})]})]})})]}),!s.type.startsWith("image/")&&e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4",children:[d(s.name,s.type),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-foreground line-clamp-1",children:s.name}),o&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:s.size})]})]})]}):e.jsxs("div",{children:[a&&/\.(jpg|jpeg|png|gif|webp|bmp|svg)$/i.test(a)&&e.jsxs("div",{className:"w-full relative",children:[e.jsx("img",{src:a,alt:a.split("/").pop()||"",className:"w-full aspect-video object-cover rounded-md"}),e.jsx("div",{className:"absolute top-2 left-2 bg-black/50 text-white p-2 rounded-md",children:e.jsxs("div",{className:"flex items-center gap-2",children:[d(a||""),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-medium line-clamp-1",children:a.split("/").pop()||""}),o&&e.jsx("p",{className:"text-xs opacity-75 line-clamp-1",children:"File yang sudah ada"})]})]})})]}),a&&!/\.(jpg|jpeg|png|gif|webp|bmp|svg)$/i.test(a)&&e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4",children:[d(a||""),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-foreground line-clamp-1",children:a.split("/").pop()||""}),o&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:"File yang sudah ada"})]})]})]})}):e.jsxs("div",{className:"flex flex-col items-center gap-3 py-4",children:[e.jsx(R,{className:"h-6 w-6 text-muted-foreground"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("span",{className:"text-muted-foreground text-sm select-none",children:[N||"Seret dan letakkan file di sini atau ",e.jsx("span",{className:"text-primary font-medium underline",children:"Jelajahi"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Format: ",u.replace(/\./g,"").toUpperCase()," (Maks. ",c,"MB)"]})]})]}),e.jsx(I,{ref:i,type:"file",accept:u,className:"hidden",onChange:b,disabled:n})]}),p&&e.jsx(B,{message:p})]})}export{P as F,D as a};
